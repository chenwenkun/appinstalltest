# App è¦†ç›–å‡çº§å…¼å®¹æ€§æµ‹è¯•å¹³å° (Android/iOS)

æœ¬å¹³å°ç”¨äºè‡ªåŠ¨åŒ–æµ‹è¯• App çš„è¦†ç›–å‡çº§åœºæ™¯ï¼Œæ”¯æŒ Android (APK) å’Œ iOS (IPA) åŒç«¯ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

*   **åŒç«¯æ”¯æŒ**ï¼šåŒæ—¶æ”¯æŒ Android è®¾å¤‡ (é€šè¿‡ ADB) å’Œ iOS è®¾å¤‡ (é€šè¿‡ tidevice)ã€‚
*   **è¿œç¨‹ä¸‹è½½**ï¼šé›†æˆè’²å…¬è‹± (Pgyer) ä¸‹è½½åŠŸèƒ½ï¼Œæ”¯æŒè‡ªåŠ¨è§£æå’Œä¸‹è½½ APK/IPAã€‚
*   **æ–‡ä»¶ç®¡ç†**ï¼šç»Ÿä¸€ç®¡ç†ä¸Šä¼ çš„å®‰è£…åŒ…ï¼Œæ”¯æŒè‡ªåŠ¨è§£æç‰ˆæœ¬ä¿¡æ¯ (åŒ…åã€ç‰ˆæœ¬å·)ã€‚
*   **è‡ªåŠ¨åŒ–æµ‹è¯•**ï¼šä¸€é”®æ‰§è¡Œ "å®‰è£…æ—§ç‰ˆ -> å¯åŠ¨ -> è¦†ç›–å®‰è£…æ–°ç‰ˆ -> éªŒè¯" çš„å®Œæ•´æµ‹è¯•æµç¨‹ã€‚
*   **æ™ºèƒ½äº¤äº’**ï¼š
    *   è‡ªåŠ¨è¯†åˆ«è®¾å¤‡å¹³å° (Android/iOS)ã€‚
    *   ä¸‹è½½å¤±è´¥è‡ªåŠ¨æ¸…ç†ï¼Œé˜²æ­¢æ— æ•ˆæ–‡ä»¶æ®‹ç•™ã€‚
    *   æ”¯æŒä¸ºä¸‹è½½æ–‡ä»¶æ·»åŠ å¤‡æ³¨ã€‚

## ğŸ› ï¸ ç¯å¢ƒè¦æ±‚

*   Python 3.8+
*   **Android**: éœ€å®‰è£… ADB (Android Debug Bridge) å¹¶é…ç½®ç¯å¢ƒå˜é‡ã€‚
*   **iOS**: éœ€å®‰è£… [tidevice](https://github.com/alibaba/taobao-iphone-device) (å·²åŒ…å«åœ¨ requirements.txt ä¸­) å’Œ iTunes (Windows) æˆ– Xcode (Mac)ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. æœ¬åœ°è¿è¡Œ (æ¨è)

é€‚ç”¨äºç›´æ¥è¿æ¥ USB è®¾å¤‡è¿›è¡Œæµ‹è¯•ã€‚

1.  **å…‹éš†ä»£ç **
    ```bash
    git clone https://github.com/chenwenkun/appinstalltest.git
    cd appinstalltest
    ```

2.  **å®‰è£…ä¾èµ–**
    ```bash
    pip install -r requirements.txt
    ```

3.  **å¯åŠ¨æœåŠ¡**
    ```bash
    python main.py
    ```

4.  **è®¿é—®å¹³å°**
    æµè§ˆå™¨è®¿é—® `http://127.0.0.1:8791`ã€‚

### 2. ä½¿ç”¨æŒ‡å—

1.  **è¿æ¥è®¾å¤‡**ï¼šé€šè¿‡ USB è¿æ¥ Android æˆ– iOS è®¾å¤‡ï¼Œç¡®ä¿å·²å¼€å¯è°ƒè¯•æ¨¡å¼ã€‚
2.  **é€‰æ‹©è®¾å¤‡**ï¼šåœ¨â€œè®¾å¤‡åˆ—è¡¨â€ä¸­ç‚¹å‡»â€œé€‰æ‹©â€æŒ‰é’®ï¼Œé€‰ä¸­ç›®æ ‡æµ‹è¯•è®¾å¤‡ã€‚
3.  **å‡†å¤‡å®‰è£…åŒ…**ï¼š
    *   **ä¸Šä¼ **ï¼šç›´æ¥æ‹–æ‹½ APK/IPA æ–‡ä»¶åˆ°ä¸Šä¼ åŒºåŸŸã€‚
    *   **ä¸‹è½½**ï¼šè¾“å…¥è’²å…¬è‹±é“¾æ¥ (Pgyer)ï¼Œå¯é€‰æ‹©å¡«å†™å¤‡æ³¨ï¼Œç‚¹å‡»ä¸‹è½½ã€‚
4.  **æ‰§è¡Œæµ‹è¯•**ï¼š
    *   åœ¨â€œæµ‹è¯•æ§åˆ¶â€åŒºåŸŸé€‰æ‹©â€œæ—§ç‰ˆæœ¬â€å’Œâ€œæ–°ç‰ˆæœ¬â€å®‰è£…åŒ…ã€‚
    *   ç‚¹å‡»â€œå®‰è£…æ—§ç‰ˆâ€ï¼Œç­‰å¾…å®‰è£…å®Œæˆã€‚
    *   ç‚¹å‡»â€œè¦†ç›–æ–°ç‰ˆâ€ï¼Œè§‚å¯Ÿè¦†ç›–å®‰è£…ç»“æœã€‚

---

## ğŸ³ Docker éƒ¨ç½² (æœåŠ¡ç«¯)

é€‚ç”¨äºåœ¨æœåŠ¡å™¨ä¸Šéƒ¨ç½²ï¼Œæä¾› Web ç•Œé¢å’Œæ–‡ä»¶ç®¡ç†åŠŸèƒ½ã€‚
**æ³¨æ„**ï¼šDocker å®¹å™¨å†…é»˜è®¤æ— æ³•ç›´æ¥è®¿é—®å®¿ä¸»æœºçš„ USB è®¾å¤‡ã€‚è‹¥éœ€è¿æ¥è®¾å¤‡ï¼Œå»ºè®®ä½¿ç”¨è¿œç¨‹ ADB æˆ–ä»¥ç‰¹æƒæ¨¡å¼è¿è¡Œã€‚

### æ„å»ºé•œåƒ

```bash
docker build -t appinstalltest .
```

### è¿è¡Œå®¹å™¨

```bash
docker run -d -p 8791:8791 --restart always --name appinstalltest appinstalltest
```

è‹¥éœ€æŒ‚è½½å®¿ä¸»æœº USB è®¾å¤‡ (Linux)ï¼š
```bash
docker run -d -p 8791:8791 --restart always --privileged -v /dev/bus/usb:/dev/bus/usb --name appinstalltest appinstalltest
```

---

## ğŸ“¦ PyPI æ‰“åŒ…ä¸å‘å¸ƒ

### æ‰“åŒ…

```bash
python setup.py sdist bdist_wheel
```

### å®‰è£…

ç”Ÿæˆçš„åŒ…ä½äº `dist/` ç›®å½•ä¸‹ï¼Œå¯é€šè¿‡ pip å®‰è£…ï¼š

```bash
pip install dist/appinstalltest-0.1.0-py3-none-any.whl
```

### å‘å¸ƒåˆ° PyPI

```bash
pip install twine
twine upload dist/*
```
